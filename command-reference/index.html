



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="CLI Tools for Managing AWS">
      
      
        <link rel="canonical" href="https://bash-my-aws.github.io/command-reference/">
      
      
        <meta name="author" content="Mike Bailey">
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.5.0">
    
    
      
        <title>Command reference - bash-my-aws</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/application.1b62728e.css">
      
      
    
    
      <script src="../assets/javascripts/modernizr.268332fc.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../assets/fonts/material-icons.css">
    
    
    
      
        
<script>
  window.ga = window.ga || function() {
    (ga.q = ga.q || []).push(arguments)
  }
  ga.l = +new Date
  /* Setup integration and send page view */
  ga("create", "UA-154550647-1", "bash-my-aws.org")
  ga("set", "anonymizeIp", true)
  ga("send", "pageview")
  /* Register handler to log search on blur */
  document.addEventListener("DOMContentLoaded", () => {
    if (document.forms.search) {
      var query = document.forms.search.query
      query.addEventListener("blur", function() {
        if (this.value) {
          var path = document.location.pathname;
          ga("send", "pageview", path + "?q=" + this.value)
        }
      })
    }
  })
</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
      
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#aws-account-commands" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="https://bash-my-aws.github.io/" title="bash-my-aws" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              bash-my-aws
            </span>
            <span class="md-header-nav__topic">
              
                Command reference
              
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  

<a href="https://github.com/bash-my-universe/bash-my-aws/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    bash-my-universe/bash-my-aws
  </div>
</a>
          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main" role="main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="https://bash-my-aws.github.io/" title="bash-my-aws" class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </a>
    bash-my-aws
  </label>
  
    <div class="md-nav__source">
      


  

<a href="https://github.com/bash-my-universe/bash-my-aws/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    bash-my-universe/bash-my-aws
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="." title="Command Reference" class="md-nav__link">
      Command Reference
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../cloudformation-naming" title="CloudFormation Naming" class="md-nav__link">
      CloudFormation Naming
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#aws-account-commands" class="md-nav__link">
    aws-account-commands
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aws-account-alias" class="md-nav__link">
    aws-account-alias
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aws-account-id" class="md-nav__link">
    aws-account-id
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aws-account-each" class="md-nav__link">
    aws-account-each
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aws-panopticon" class="md-nav__link">
    aws-panopticon
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aws-account-cost-explorer" class="md-nav__link">
    aws-account-cost-explorer
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aws-account-cost-recommendations" class="md-nav__link">
    aws-account-cost-recommendations
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#region-commands" class="md-nav__link">
    region-commands
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#regions" class="md-nav__link">
    regions
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#region" class="md-nav__link">
    region
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#region-each" class="md-nav__link">
    region-each
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#stack-commands" class="md-nav__link">
    stack-commands
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#stacks" class="md-nav__link">
    stacks
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stack-arn" class="md-nav__link">
    stack-arn
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stack-cancel-update" class="md-nav__link">
    stack-cancel-update
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stack-create" class="md-nav__link">
    stack-create
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stack-update" class="md-nav__link">
    stack-update
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stack-delete" class="md-nav__link">
    stack-delete
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stack-exports" class="md-nav__link">
    stack-exports
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stack-recreate" class="md-nav__link">
    stack-recreate
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stack-failure" class="md-nav__link">
    stack-failure
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stack-events" class="md-nav__link">
    stack-events
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stack-resources" class="md-nav__link">
    stack-resources
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stack-asgs" class="md-nav__link">
    stack-asgs
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stack-asg-instances" class="md-nav__link">
    stack-asg-instances
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stack-elbs" class="md-nav__link">
    stack-elbs
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stack-instances" class="md-nav__link">
    stack-instances
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stack-parameters" class="md-nav__link">
    stack-parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stack-status" class="md-nav__link">
    stack-status
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stack-tag" class="md-nav__link">
    stack-tag
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stack-tail" class="md-nav__link">
    stack-tail
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stack-template" class="md-nav__link">
    stack-template
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stack-tags" class="md-nav__link">
    stack-tags
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stack-tags-text" class="md-nav__link">
    stack-tags-text
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stack-outputs" class="md-nav__link">
    stack-outputs
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stack-validate" class="md-nav__link">
    stack-validate
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stack-diff" class="md-nav__link">
    stack-diff
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#instance-commands" class="md-nav__link">
    instance-commands
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#instances" class="md-nav__link">
    instances
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#instance-asg" class="md-nav__link">
    instance-asg
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#instance-az" class="md-nav__link">
    instance-az
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#instance-console" class="md-nav__link">
    instance-console
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#instance-dns" class="md-nav__link">
    instance-dns
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#instance-health-set-unhealthy" class="md-nav__link">
    instance-health-set-unhealthy
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#instance-iam-profile" class="md-nav__link">
    instance-iam-profile
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#instance-ip" class="md-nav__link">
    instance-ip
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#instance-ssh" class="md-nav__link">
    instance-ssh
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#instance-ssh-details" class="md-nav__link">
    instance-ssh-details
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#instance-stack" class="md-nav__link">
    instance-stack
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#instance-start" class="md-nav__link">
    instance-start
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#instance-state" class="md-nav__link">
    instance-state
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#instance-stop" class="md-nav__link">
    instance-stop
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#instance-tags" class="md-nav__link">
    instance-tags
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#instance-terminate" class="md-nav__link">
    instance-terminate
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#instance-termination-protection" class="md-nav__link">
    instance-termination-protection
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#instance-termination-protection-disable" class="md-nav__link">
    instance-termination-protection-disable
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#instance-termination-protection-enable" class="md-nav__link">
    instance-termination-protection-enable
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#instance-type" class="md-nav__link">
    instance-type
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#instance-userdata" class="md-nav__link">
    instance-userdata
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#instance-volumes" class="md-nav__link">
    instance-volumes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#instance-vpc" class="md-nav__link">
    instance-vpc
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#asg-commands" class="md-nav__link">
    asg-commands
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#asgs" class="md-nav__link">
    asgs
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#asg-capacity" class="md-nav__link">
    asg-capacity
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#asg-desired-size-set" class="md-nav__link">
    asg-desired-size-set
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#asg-instances" class="md-nav__link">
    asg-instances
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#asg-launch-configuration" class="md-nav__link">
    asg-launch-configuration
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#launch-configurations" class="md-nav__link">
    launch-configurations
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#launch-configuration-asgs" class="md-nav__link">
    launch-configuration-asgs
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#asg-max-size-set" class="md-nav__link">
    asg-max-size-set
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#asg-min-size-set" class="md-nav__link">
    asg-min-size-set
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#asg-processes_suspended" class="md-nav__link">
    asg-processes_suspended
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#asg-resume" class="md-nav__link">
    asg-resume
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#asg-suspend" class="md-nav__link">
    asg-suspend
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#asg-stack" class="md-nav__link">
    asg-stack
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#asg-scaling-activities" class="md-nav__link">
    asg-scaling-activities
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cert-commands" class="md-nav__link">
    cert-commands
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#certs" class="md-nav__link">
    certs
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#certs-arn" class="md-nav__link">
    certs-arn
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cert-users" class="md-nav__link">
    cert-users
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cert-delete" class="md-nav__link">
    cert-delete
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cloudtrail-commands" class="md-nav__link">
    cloudtrail-commands
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#cloudtrails" class="md-nav__link">
    cloudtrails
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cloudtrail-status" class="md-nav__link">
    cloudtrail-status
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ecr-commands" class="md-nav__link">
    ecr-commands
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ecr-repositories" class="md-nav__link">
    ecr-repositories
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ecr-repository-images" class="md-nav__link">
    ecr-repository-images
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#elb-commands" class="md-nav__link">
    elb-commands
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#elbs" class="md-nav__link">
    elbs
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#elb-dnsname" class="md-nav__link">
    elb-dnsname
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#elb-instances" class="md-nav__link">
    elb-instances
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#elb-stack" class="md-nav__link">
    elb-stack
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iam-commands" class="md-nav__link">
    iam-commands
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#iam-roles" class="md-nav__link">
    iam-roles
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iam-role-principal" class="md-nav__link">
    iam-role-principal
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#image-commands" class="md-nav__link">
    image-commands
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#images" class="md-nav__link">
    images
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#image-deregister" class="md-nav__link">
    image-deregister
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#keypair-commands" class="md-nav__link">
    keypair-commands
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#keypairs" class="md-nav__link">
    keypairs
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#keypair-create" class="md-nav__link">
    keypair-create
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#keypair-delete" class="md-nav__link">
    keypair-delete
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kms-commands" class="md-nav__link">
    kms-commands
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#kms-encrypt" class="md-nav__link">
    kms-encrypt
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kms-decrypt" class="md-nav__link">
    kms-decrypt
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kms-aliases" class="md-nav__link">
    kms-aliases
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kms-alias-create" class="md-nav__link">
    kms-alias-create
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kms-alias-delete" class="md-nav__link">
    kms-alias-delete
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kms-keys" class="md-nav__link">
    kms-keys
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kms-key-create" class="md-nav__link">
    kms-key-create
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kms-key-details" class="md-nav__link">
    kms-key-details
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kms-key-disable" class="md-nav__link">
    kms-key-disable
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kms-key-enable" class="md-nav__link">
    kms-key-enable
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lambda-commands" class="md-nav__link">
    lambda-commands
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lambda-functions" class="md-nav__link">
    lambda-functions
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lambda-function-memory" class="md-nav__link">
    lambda-function-memory
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lambda-function-memory-set" class="md-nav__link">
    lambda-function-memory-set
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lambda-function-memory-step" class="md-nav__link">
    lambda-function-memory-step
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#log-commands" class="md-nav__link">
    log-commands
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#log-groups" class="md-nav__link">
    log-groups
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#rds-commands" class="md-nav__link">
    rds-commands
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#rds-db-instances" class="md-nav__link">
    rds-db-instances
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#route53-commands" class="md-nav__link">
    route53-commands
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#hosted-zones" class="md-nav__link">
    hosted-zones
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hosted-zone-ns-records" class="md-nav__link">
    hosted-zone-ns-records
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#s3-commands" class="md-nav__link">
    s3-commands
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#buckets" class="md-nav__link">
    buckets
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bucket-acls" class="md-nav__link">
    bucket-acls
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bucket-remove" class="md-nav__link">
    bucket-remove
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bucket-remove-force" class="md-nav__link">
    bucket-remove-force
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sts-commands" class="md-nav__link">
    sts-commands
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sts-assume-role" class="md-nav__link">
    sts-assume-role
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vpc-commands" class="md-nav__link">
    vpc-commands
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pcxs" class="md-nav__link">
    pcxs
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#subnets" class="md-nav__link">
    subnets
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#vpcs" class="md-nav__link">
    vpcs
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#vpc-azs" class="md-nav__link">
    vpc-azs
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#vpc-az-count" class="md-nav__link">
    vpc-az-count
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#vpc-lambda-functions" class="md-nav__link">
    vpc-lambda-functions
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#vpc-dhcp-options-ntp" class="md-nav__link">
    vpc-dhcp-options-ntp
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#vpc-endpoints" class="md-nav__link">
    vpc-endpoints
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#vpc-endpoint-services" class="md-nav__link">
    vpc-endpoint-services
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#vpc-igw" class="md-nav__link">
    vpc-igw
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#vpc-route-tables" class="md-nav__link">
    vpc-route-tables
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#vpc-nat-gateways" class="md-nav__link">
    vpc-nat-gateways
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#vpc-subnets" class="md-nav__link">
    vpc-subnets
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#vpc-network-acls" class="md-nav__link">
    vpc-network-acls
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#vpc-rds" class="md-nav__link">
    vpc-rds
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#vpc-default-delete" class="md-nav__link">
    vpc-default-delete
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/bash-my-universe/bash-my-aws/edit/master/docs/command-reference.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                  <h1>Command reference</h1>
                
                <p>The project provides over 120 commands but fear not, much has been done
to make them <em>discoverable</em>, <em>memorable</em> and hopefully in many cases <em>obvious</em>.</p>
<p>The reference material below is all extracted from the source of the commands.
While not necessary to use the commands. Be curious. Read the source. :-)</p>
<p>Lists in this project are alphabetised except where it makes sense not to.
The first few sets of commands were chosen because they are likely to be of
the most interest to readers.</p>
<div class="admonition note">
<p class="admonition-title">General Rules</p>
<ul>
<li>Commands expect <code>$AWS_DEFAULT_REGION</code> environment variable to be set
  (check/set with <code>region</code> command)</li>
<li>Most commands that list resources (<code>stacks</code>, `instances , etc)
  accept filter term as first arg.<ul>
<li><em>e.g. <code>stacks blah</code> is equivalent to <code>stacks | grep blah</code></em></li>
</ul>
</li>
<li>Most commands accept resource identifiers via STDIN
  (first token of each line)</li>
<li>Resources are generally listed in chronological order of creation.</li>
</ul>
</div>
<h2 id="aws-account-commands">aws-account-commands<a class="headerlink" href="#aws-account-commands" title="Permanent link">&para;</a></h2>
<h3 id="aws-account-alias">aws-account-alias<a class="headerlink" href="#aws-account-alias" title="Permanent link">&para;</a></h3>
<p>Retrieve AWS Account Alias for current account</p>
<div class="codehilite"><pre><span></span>$ aws-account-alias
example-account-prod
</pre></div>


<h3 id="aws-account-id">aws-account-id<a class="headerlink" href="#aws-account-id" title="Permanent link">&para;</a></h3>
<p>Retrieve AWS Account ID for current account</p>
<div class="codehilite"><pre><span></span>$ aws-account-id
012345678901
</pre></div>


<h3 id="aws-account-each">aws-account-each<a class="headerlink" href="#aws-account-each" title="Permanent link">&para;</a></h3>
<p>Run a script/command across a number of AWS Accounts</p>
<div class="codehilite"><pre><span></span>USAGE: aws-account-each cmd # pipe in AWS_ACCOUNT_IDS

$ grep non_prod AWS_ACCOUNTS | aws-account-each stacks FAILED

# account=012345678901 alias=example-account-prod
example-stack1-prod  CREATED_FAILED
example-stack2-prod  UPDATE_ROLLBACK_FAILED
# account=123456789012 alias=example-account-staging
example-stack1-staging  CREATED_FAILED
example-stack2-staging  UPDATE_ROLLBACK_FAILED
</pre></div>


<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In order to use <code>aws-account-each</code>, you need to be authenticated with an
IAM Role that can assume a Role in each of the specified accounts.
Check the source for more info.</p>
</div>
<h3 id="aws-panopticon">aws-panopticon<a class="headerlink" href="#aws-panopticon" title="Permanent link">&para;</a></h3>
<p>aws-panopticon was previous name for aws-account-each()</p>
<h3 id="aws-account-cost-explorer">aws-account-cost-explorer<a class="headerlink" href="#aws-account-cost-explorer" title="Permanent link">&para;</a></h3>
<p>Use with an AWS Organisations Master Account to open multiple accounts
in Cost Explorer.</p>
<div class="codehilite"><pre><span></span>$ grep demo AWS_ACCOUNTS | aws-account-cost-explorer
#=&gt; Opens web browser to AWS Cost Explorer with accounts selected
</pre></div>


<h3 id="aws-account-cost-recommendations">aws-account-cost-recommendations<a class="headerlink" href="#aws-account-cost-recommendations" title="Permanent link">&para;</a></h3>
<p>Use with an AWS Organisations Master Account to open multiple accounts
in Cost Recommendations.</p>
<div class="codehilite"><pre><span></span>$ grep non_prod AWS_ACCOUNTS | aws-account-each stacks FAILED
#=&gt; Opens web browser to AWS Cost Recommendations with accounts selected
</pre></div>


<h2 id="region-commands">region-commands<a class="headerlink" href="#region-commands" title="Permanent link">&para;</a></h2>
<h3 id="regions">regions<a class="headerlink" href="#regions" title="Permanent link">&para;</a></h3>
<p>List regions</p>
<p>The region() function must be sourced in order to update the
AWS_DEFAULT_REGION environment variable. This is because it
cannot update an environment variable when run as a subprocess.</p>
<div class="codehilite"><pre><span></span>$ regions
ap-northeast-1
ap-northeast-2
ap-south-1
ap-southeast-1
ap-southeast-2
...
us-west-2
</pre></div>


<h3 id="region">region<a class="headerlink" href="#region" title="Permanent link">&para;</a></h3>
<p>Get/Set <code>$AWS_DEFAULT_REGION</code> shell environment variable</p>
<div class="codehilite"><pre><span></span>$ region
us-east-1

$ region ap-southeast-2

$ region
ap-southeast-2
</pre></div>


<h3 id="region-each">region-each<a class="headerlink" href="#region-each" title="Permanent link">&para;</a></h3>
<p>Run a command in every region.
Any output lines will be appended with "#${REGION}".</p>
<div class="codehilite"><pre><span></span>$ region-each stacks | column -t
example-ec2-ap-northeast-1  CREATE_COMPLETE  2011-05-23T15:47:44Z  NEVER_UPDATED  NOT_NESTED  #ap-northeast-1
example-ec2-ap-northeast-2  CREATE_COMPLETE  2011-05-23T15:47:44Z  NEVER_UPDATED  NOT_NESTED  #ap-northeast-2
...
example-ec2-us-west-2       CREATE_COMPLETE  2011-05-23T15:47:44Z  NEVER_UPDATED  NOT_NESTED  #us-west-2
</pre></div>


<h2 id="stack-commands">stack-commands<a class="headerlink" href="#stack-commands" title="Permanent link">&para;</a></h2>
<h3 id="stacks">stacks<a class="headerlink" href="#stacks" title="Permanent link">&para;</a></h3>
<p>List CloudFormation stacks.</p>
<p>To make it fly we omit stacks with status of DELETE_COMPLETE
Output is sorted by CreationTime</p>
<div class="codehilite"><pre><span></span>$ stacks
nagios          CREATE_COMPLETE  2018-03-12T11:41:31Z  NEVER_UPDATED  NOT_NESTED
postgres1       CREATE_COMPLETE  2019-04-14T15:22:44Z  NEVER_UPDATED  NOT_NESTED
postgres2       CREATE_COMPLETE  2019-05-18T05:45:50Z  NEVER_UPDATED  NOT_NESTED
prometheus-web  CREATE_COMPLETE  2019-11-23T15:57:04Z  NEVER_UPDATED  NOT_NESTED
</pre></div>


<p><em>Provide a filter string for a <code>| grep</code> effect with tighter columisation:</em></p>
<div class="codehilite"><pre><span></span>$ stacks postgres
postgres1  CREATE_COMPLETE  2019-04-14T15:22:44Z  NEVER_UPDATED  NOT_NESTED
postgres2  CREATE_COMPLETE  2019-05-18T05:45:50Z  NEVER_UPDATED  NOT_NESTED
</pre></div>


<h3 id="stack-arn">stack-arn<a class="headerlink" href="#stack-arn" title="Permanent link">&para;</a></h3>
<p>Returns ARN(s) for stacks.</p>
<div class="codehilite"><pre><span></span>USAGE: stack-arn stack [stack]

$ stack-arn prometheus-web
arn:aws:cloudformation:us-east-1:000000000000:stack/prometheus-web/805e081c-b8eb-4f6c-9872-2b5cddc77fba
</pre></div>


<p><em>Supports multiple stack names from STDIN</em>:</p>
<div class="codehilite"><pre><span></span>$ stacks | stack-arn
arn:aws:cloudformation:us-east-1:000000000000:stack/nagios/c0f0ef04-b505-4c0c-87cd-ca924153ad1c
arn:aws:cloudformation:us-east-1:000000000000:stack/postgres1/758b0ba2-60f2-4432-8935-f79f47708f23
arn:aws:cloudformation:us-east-1:000000000000:stack/postgres2/7420bbd4-3026-444f-b55b-fa0a9d564730
arn:aws:cloudformation:us-east-1:000000000000:stack/prometheus-web/805e081c-b8eb-4f6c-9872-2b5cddc77fba
</pre></div>


<h3 id="stack-cancel-update">stack-cancel-update<a class="headerlink" href="#stack-cancel-update" title="Permanent link">&para;</a></h3>
<p>Cancel an in-progress stack update</p>
<h3 id="stack-create">stack-create<a class="headerlink" href="#stack-create" title="Permanent link">&para;</a></h3>
<p>Create a CloudFormation Stack</p>
<p><em>See suggested <a href="/cloudformation-naming/">CloudFormation File Naming Conventions</a>
to take advantage of shorter commands</em></p>
<div class="codehilite"><pre><span></span>USAGE: stack-create stack [template-file] [parameters-file]             \
            [--capabilities=OPTIONAL_VALUE] [--role-arn=OPTIONAL_VALUE]

$ stack-create params/asg-params-prod.json
Resolved arguments: asg-prod ./asg.yml params/asg-params-prod.json
arn:aws:cloudformation:ap-southeast-2:812094344564:stack/asg-prod/98d40130-23f2-11ea-b7c1-06494f833672
----------------------------------------------------------------------------------------------
|                                     DescribeStackEvents                                    |
+---------------------------+-----------+------------------------------+---------------------+
|  2019-12-21T13:05:44.261Z |  asg-prod |  AWS::CloudFormation::Stack  |  CREATE_IN_PROGRESS |
--------------------------------------------------------------------------------------------------------------------
|                                                DescribeStackEvents                                               |
+--------------------------+----------------------+-----------------------------------------+----------------------+
|  2019-12-21T13:05:44.261Z|  asg-prod            |  AWS::CloudFormation::Stack             |  CREATE_IN_PROGRESS  |
|  2019-12-21T13:05:48.351Z|  LaunchConfiguration |  AWS::AutoScaling::LaunchConfiguration  |  CREATE_IN_PROGRESS  |
|  2019-12-21T13:05:48.828Z|  LaunchConfiguration |  AWS::AutoScaling::LaunchConfiguration  |  CREATE_IN_PROGRESS  |
|  2019-12-21T13:05:49.187Z|  LaunchConfiguration |  AWS::AutoScaling::LaunchConfiguration  |  CREATE_COMPLETE     |
|  2019-12-21T13:05:51.230Z|  AutoScalingGroup    |  AWS::AutoScaling::AutoScalingGroup     |  CREATE_IN_PROGRESS  |
|  2019-12-21T13:05:51.837Z|  AutoScalingGroup    |  AWS::AutoScaling::AutoScalingGroup     |  CREATE_IN_PROGRESS  |
|  2019-12-21T13:05:52.950Z|  AutoScalingGroup    |  AWS::AutoScaling::AutoScalingGroup     |  CREATE_COMPLETE     |
|  2019-12-21T13:05:54.493Z|  asg-prod            |  AWS::CloudFormation::Stack             |  CREATE_COMPLETE     |
+--------------------------+----------------------+-----------------------------------------+----------------------+
</pre></div>


<h3 id="stack-update">stack-update<a class="headerlink" href="#stack-update" title="Permanent link">&para;</a></h3>
<p>Update a CloudFormation Stack</p>
<p><em>See suggested <a href="/cloudformation-naming/">CloudFormation File Naming Conventions</a>
to take advantage of shorter commands</em></p>
<div class="codehilite"><pre><span></span>USAGE: stack-update stack [template-file] [parameters-file] \
              [--capabilities=OPTIONAL_VALUE] [--role-arn=OPTIONAL_VALUE]

$ stack-update params/asg-params-prod.json
Resolved arguments: asg-prod ./asg.yml params/asg-params-prod.json
arn:aws:cloudformation:ap-southeast-2:812094344564:stack/asg-prod/98d40130-23f2-11ea-b7c1-06494f833672
--------------------------------------------------------------------------------------------------------------------
|                                                DescribeStackEvents                                               |
+--------------------------+----------------------+-----------------------------------------+----------------------+
|  2019-12-21T13:05:44.261Z|  asg-prod            |  AWS::CloudFormation::Stack             |  CREATE_IN_PROGRESS  |
|  2019-12-21T13:05:48.351Z|  LaunchConfiguration |  AWS::AutoScaling::LaunchConfiguration  |  CREATE_IN_PROGRESS  |
|  2019-12-21T13:05:48.828Z|  LaunchConfiguration |  AWS::AutoScaling::LaunchConfiguration  |  CREATE_IN_PROGRESS  |
|  2019-12-21T13:05:49.187Z|  LaunchConfiguration |  AWS::AutoScaling::LaunchConfiguration  |  CREATE_COMPLETE     |
|  2019-12-21T13:05:51.230Z|  AutoScalingGroup    |  AWS::AutoScaling::AutoScalingGroup     |  CREATE_IN_PROGRESS  |
|  2019-12-21T13:05:51.837Z|  AutoScalingGroup    |  AWS::AutoScaling::AutoScalingGroup     |  CREATE_IN_PROGRESS  |
|  2019-12-21T13:05:52.950Z|  AutoScalingGroup    |  AWS::AutoScaling::AutoScalingGroup     |  CREATE_COMPLETE     |
|  2019-12-21T13:05:54.493Z|  asg-prod            |  AWS::CloudFormation::Stack             |  CREATE_COMPLETE     |
|  2019-12-21T13:12:43.731Z|  asg-prod            |  AWS::CloudFormation::Stack             |  UPDATE_IN_PROGRESS  |
|  2019-12-21T13:12:48.294Z|  AutoScalingGroup    |  AWS::AutoScaling::AutoScalingGroup     |  UPDATE_IN_PROGRESS  |
-------------------------------------------------------------------------------------------------------------------------------------
|                                                        DescribeStackEvents                                                        |
+--------------------------+----------------------+-----------------------------------------+---------------------------------------+
|  2019-12-21T13:05:44.261Z|  asg-prod            |  AWS::CloudFormation::Stack             |  CREATE_IN_PROGRESS                   |
|  2019-12-21T13:05:48.351Z|  LaunchConfiguration |  AWS::AutoScaling::LaunchConfiguration  |  CREATE_IN_PROGRESS                   |
|  2019-12-21T13:05:48.828Z|  LaunchConfiguration |  AWS::AutoScaling::LaunchConfiguration  |  CREATE_IN_PROGRESS                   |
|  2019-12-21T13:05:49.187Z|  LaunchConfiguration |  AWS::AutoScaling::LaunchConfiguration  |  CREATE_COMPLETE                      |
|  2019-12-21T13:05:51.230Z|  AutoScalingGroup    |  AWS::AutoScaling::AutoScalingGroup     |  CREATE_IN_PROGRESS                   |
|  2019-12-21T13:05:51.837Z|  AutoScalingGroup    |  AWS::AutoScaling::AutoScalingGroup     |  CREATE_IN_PROGRESS                   |
|  2019-12-21T13:05:52.950Z|  AutoScalingGroup    |  AWS::AutoScaling::AutoScalingGroup     |  CREATE_COMPLETE                      |
|  2019-12-21T13:05:54.493Z|  asg-prod            |  AWS::CloudFormation::Stack             |  CREATE_COMPLETE                      |
|  2019-12-21T13:12:43.731Z|  asg-prod            |  AWS::CloudFormation::Stack             |  UPDATE_IN_PROGRESS                   |
|  2019-12-21T13:12:48.294Z|  AutoScalingGroup    |  AWS::AutoScaling::AutoScalingGroup     |  UPDATE_IN_PROGRESS                   |
|  2019-12-21T13:14:05.182Z|  AutoScalingGroup    |  AWS::AutoScaling::AutoScalingGroup     |  UPDATE_COMPLETE                      |
|  2019-12-21T13:14:07.118Z|  asg-prod            |  AWS::CloudFormation::Stack             |  UPDATE_COMPLETE_CLEANUP_IN_PROGRESS  |
|  2019-12-21T13:14:07.820Z|  asg-prod            |  AWS::CloudFormation::Stack             |  UPDATE_COMPLETE                      |
+--------------------------+----------------------+-----------------------------------------+---------------------------------------+
</pre></div>


<h3 id="stack-delete">stack-delete<a class="headerlink" href="#stack-delete" title="Permanent link">&para;</a></h3>
<p>Delete a CloudFormation Stack</p>
<div class="codehilite"><pre><span></span>USAGE: stack-delete stack [stack]

$ stacks | stack-delete
You are about to delete the following stacks:
asg-prod
Are you sure you want to continue? y
-------------------------------------------------------------------------------------------------------------------------------------
|                                                        DescribeStackEvents                                                        |
+--------------------------+----------------------+-----------------------------------------+---------------------------------------+
|  2019-12-21T13:05:44.261Z|  asg-prod            |  AWS::CloudFormation::Stack             |  CREATE_IN_PROGRESS                   |
|  2019-12-21T13:05:48.351Z|  LaunchConfiguration |  AWS::AutoScaling::LaunchConfiguration  |  CREATE_IN_PROGRESS                   |
|  2019-12-21T13:05:48.828Z|  LaunchConfiguration |  AWS::AutoScaling::LaunchConfiguration  |  CREATE_IN_PROGRESS                   |
|  2019-12-21T13:05:49.187Z|  LaunchConfiguration |  AWS::AutoScaling::LaunchConfiguration  |  CREATE_COMPLETE                      |
|  2019-12-21T13:05:51.230Z|  AutoScalingGroup    |  AWS::AutoScaling::AutoScalingGroup     |  CREATE_IN_PROGRESS                   |
|  2019-12-21T13:05:51.837Z|  AutoScalingGroup    |  AWS::AutoScaling::AutoScalingGroup     |  CREATE_IN_PROGRESS                   |
|  2019-12-21T13:05:52.950Z|  AutoScalingGroup    |  AWS::AutoScaling::AutoScalingGroup     |  CREATE_COMPLETE                      |
|  2019-12-21T13:05:54.493Z|  asg-prod            |  AWS::CloudFormation::Stack             |  CREATE_COMPLETE                      |
|  2019-12-21T13:12:43.731Z|  asg-prod            |  AWS::CloudFormation::Stack             |  UPDATE_IN_PROGRESS                   |
|  2019-12-21T13:12:48.294Z|  AutoScalingGroup    |  AWS::AutoScaling::AutoScalingGroup     |  UPDATE_IN_PROGRESS                   |
|  2019-12-21T13:14:05.182Z|  AutoScalingGroup    |  AWS::AutoScaling::AutoScalingGroup     |  UPDATE_COMPLETE                      |
|  2019-12-21T13:14:07.118Z|  asg-prod            |  AWS::CloudFormation::Stack             |  UPDATE_COMPLETE_CLEANUP_IN_PROGRESS  |
|  2019-12-21T13:14:07.820Z|  asg-prod            |  AWS::CloudFormation::Stack             |  UPDATE_COMPLETE                      |
|  2019-12-21T13:18:06.709Z|  asg-prod            |  AWS::CloudFormation::Stack             |  DELETE_IN_PROGRESS                   |
|  2019-12-21T13:18:08.931Z|  AutoScalingGroup    |  AWS::AutoScaling::AutoScalingGroup     |  DELETE_IN_PROGRESS                   |

An error occurred (ValidationError) when calling the DescribeStackEvents operation: Stack [asg-prod] does not exist
</pre></div>


<p><em>Note that the error reported at the end of <code>stack-delete</code> command is just AWSCLI saying it can't find the stack anymore.</em></p>
<h3 id="stack-exports">stack-exports<a class="headerlink" href="#stack-exports" title="Permanent link">&para;</a></h3>
<h3 id="stack-recreate">stack-recreate<a class="headerlink" href="#stack-recreate" title="Permanent link">&para;</a></h3>
<h3 id="stack-failure">stack-failure<a class="headerlink" href="#stack-failure" title="Permanent link">&para;</a></h3>
<p>Return reason a stack failed to update/create/delete</p>
<h3 id="stack-events">stack-events<a class="headerlink" href="#stack-events" title="Permanent link">&para;</a></h3>
<p>List event history for a single Stack</p>
<div class="codehilite"><pre><span></span>USAGE: stack-events stack
</pre></div>


<h3 id="stack-resources">stack-resources<a class="headerlink" href="#stack-resources" title="Permanent link">&para;</a></h3>
<p>List all resources in Stack(s)</p>
<div class="codehilite"><pre><span></span>USAGE: stack-resources stack [stack]

$ stacks | stack-resources
i-7d54924538baa7a1f  AWS::EC2::Instance  ec2
i-c54279c6055c3c794  AWS::EC2::Instance  nagios
i-a8b8dd6783e1a40cc  AWS::EC2::Instance  postgres1
i-5d74753e210bfe04d  AWS::EC2::Instance  postgres2
i-2aa95cc214a461398  AWS::EC2::Instance  prometheus-web
</pre></div>


<h3 id="stack-asgs">stack-asgs<a class="headerlink" href="#stack-asgs" title="Permanent link">&para;</a></h3>
<p>List ASGs in Stack(s)</p>
<div class="codehilite"><pre><span></span>USAGE: stack-asgs stack [stack]

$ stacks | stack-asgs
asg-bash-my-aws-AutoScalingGroup-MSBCWRTI3PVM  AWS::AutoScaling::AutoScalingGroup  asg-bash-my-aws
asg2-AutoScalingGroup-1FHUVUJ7SLPU7            AWS::AutoScaling::AutoScalingGroup  asg2
</pre></div>


<h3 id="stack-asg-instances">stack-asg-instances<a class="headerlink" href="#stack-asg-instances" title="Permanent link">&para;</a></h3>
<p>List EC2 Instances of EC2 Autoscaling Groups in Stack(s)</p>
<div class="codehilite"><pre><span></span>USAGE: stack-asg-instances stack [stack]

$ stacks | stack-asg-instances
i-06ee900565652ecc5  ami-0119aa4d67e59007c  t3.nano  running  asg-bash-my-aws  2019-12-13T03:15:22.000Z  ap-southeast-2c  vpc-deb8edb9
i-01c7edb986c18c16a  ami-0119aa4d67e59007c  t3.nano  running  asg2             2019-12-13T03:37:51.000Z  ap-southeast-2c  vpc-deb8edb9
</pre></div>


<h3 id="stack-elbs">stack-elbs<a class="headerlink" href="#stack-elbs" title="Permanent link">&para;</a></h3>
<p>List EC2 Elastic Load Balancers in Stack(s)</p>
<p>USAGE: stack-elbs stack [stack]</p>
<div class="codehilite"><pre><span></span>$ stacks | stack-elbs
elb-MyLoadBalancer-NA5S72MLA5KI   AWS::ElasticLoadBalancing::LoadBalancer  elb-stack-1
load-bala-MyLoadBa-11HZ0DHUHJZZI  AWS::ElasticLoadBalancing::LoadBalancer  elb-stack-2
</pre></div>


<h3 id="stack-instances">stack-instances<a class="headerlink" href="#stack-instances" title="Permanent link">&para;</a></h3>
<p>List instances in stack(s)</p>
<div class="codehilite"><pre><span></span>USAGE: stack-instances stack [stack]

$ stacks | stack-instances
i-7d54924538baa7a1f  ami-123456789012  t3.nano  stopped  ec2             2019-12-11T09:31:03.000Z  ap-southeast-2a  None
i-c54279c6055c3c794  ami-123456789012  t3.nano  running  nagios          2019-12-13T02:24:30.000Z  ap-southeast-2a  None
i-a8b8dd6783e1a40cc  ami-123456789012  t3.nano  running  postgres1       2019-12-13T02:24:32.000Z  ap-southeast-2a  None
i-5d74753e210bfe04d  ami-123456789012  t3.nano  running  postgres2       2019-12-13T02:24:34.000Z  ap-southeast-2a  None
i-2aa95cc214a461398  ami-123456789012  t3.nano  running  prometheus-web  2019-12-13T02:24:36.000Z  ap-southeast-2a  None
</pre></div>


<h3 id="stack-parameters">stack-parameters<a class="headerlink" href="#stack-parameters" title="Permanent link">&para;</a></h3>
<p>List parameters of stack</p>
<h3 id="stack-status">stack-status<a class="headerlink" href="#stack-status" title="Permanent link">&para;</a></h3>
<p>List status of stack</p>
<h3 id="stack-tag">stack-tag<a class="headerlink" href="#stack-tag" title="Permanent link">&para;</a></h3>
<p>Return selected stack tag</p>
<h3 id="stack-tail">stack-tail<a class="headerlink" href="#stack-tail" title="Permanent link">&para;</a></h3>
<p>Show all events for CF stack until update completes or fails.</p>
<h3 id="stack-template">stack-template<a class="headerlink" href="#stack-template" title="Permanent link">&para;</a></h3>
<p>Return template of a stack</p>
<h3 id="stack-tags">stack-tags<a class="headerlink" href="#stack-tags" title="Permanent link">&para;</a></h3>
<p>List stack-tags applied to a stack</p>
<h3 id="stack-tags-text">stack-tags-text<a class="headerlink" href="#stack-tags-text" title="Permanent link">&para;</a></h3>
<p>List stack-tags applied to a stack on a single line</p>
<h3 id="stack-outputs">stack-outputs<a class="headerlink" href="#stack-outputs" title="Permanent link">&para;</a></h3>
<p>List outputs of a stack</p>
<h3 id="stack-validate">stack-validate<a class="headerlink" href="#stack-validate" title="Permanent link">&para;</a></h3>
<p>Validate a stack template</p>
<h3 id="stack-diff">stack-diff<a class="headerlink" href="#stack-diff" title="Permanent link">&para;</a></h3>
<p>Compare live stack against local template (and optional params file)</p>
<div class="codehilite"><pre><span></span>USAGE: stack-diff stack [template-file]

$ stack-diff params/asg-params-prod.json
Resolved arguments: asg-prod ./asg.yml params/asg-params-prod.json
template for stack (asg-prod) and contents of file (./asg.yml) are the same

Resolved arguments: asg-prod ./asg.yml params/asg-params-prod.json
--- params
+++ params/asg-params-prod.json
@@ -1,11 +1,11 @@
 [
   {
     &quot;ParameterKey&quot;: &quot;AsgMaxSize&quot;,
-    &quot;ParameterValue&quot;: &quot;5&quot;
+    &quot;ParameterValue&quot;: &quot;2&quot;
   },
   {
     &quot;ParameterKey&quot;: &quot;AsgMinSize&quot;,
-    &quot;ParameterValue&quot;: &quot;0&quot;
+    &quot;ParameterValue&quot;: &quot;1&quot;
   },
   {
     &quot;ParameterKey&quot;: &quot;InstanceType&quot;,
</pre></div>


<p>report changes which would be made to stack if template were applied
report on what changes would be made to stack by applying params
Derive and check arguments for:</p>
<ul>
<li>stack-create</li>
<li>stack-delete</li>
<li>stack-diff</li>
</ul>
<p>In the interests of making the functions simple and a shallow read,
it's unusual for us to abstract out shared code like this.
This bit is doing some funky stuff though and I think it deserves
to go in it's own function to DRY (Don't Repeat Yourself) it up a bit.</p>
<p>This function takes the unusual approach of writing to variables of the
calling function:</p>
<ul>
<li>stack</li>
<li>template</li>
<li>params</li>
</ul>
<p>This is generally not good practice for readability and unexpected outcomes.
To contain this, the calling functions all clearly declare these three
variables as local and contain a comment that they will be set by this function.</p>
<p>If we are working from a single argument (ignore args starting with <code>--</code>)
Strip path and extension from template
Deduce params filename from stack and template names
Strip path and extension from template
File extension gets stripped off if template name provided as stack name
Determine name of template to use
determine name of params file to use
determine what (if any) capabilities a given stack was deployed with</p>
<h2 id="instance-commands">instance-commands<a class="headerlink" href="#instance-commands" title="Permanent link">&para;</a></h2>
<h3 id="instances">instances<a class="headerlink" href="#instances" title="Permanent link">&para;</a></h3>
<p>List EC2 Instances</p>
<div class="codehilite"><pre><span></span>$ instances
i-4e15ece1de1a3f869  ami-123456789012  t3.nano  running  nagios          2019-12-10T08:17:18.000Z  ap-southeast-2a  None
i-89cefa9403373d7a5  ami-123456789012  t3.nano  running  postgres1       2019-12-10T08:17:20.000Z  ap-southeast-2a  None
i-806d8f1592e2a2efd  ami-123456789012  t3.nano  running  postgres2       2019-12-10T08:17:22.000Z  ap-southeast-2a  None
i-61e86ac6be1e2c193  ami-123456789012  t3.nano  running  prometheus-web  2019-12-10T08:17:24.000Z  ap-southeast-2a  None
</pre></div>


<p><em>Optionally provide a filter string for a <code>| grep</code> effect with tighter columisation:</em></p>
<div class="codehilite"><pre><span></span>$ instances postgres
i-89cefa9403373d7a5  ami-123456789012  t3.nano  running  postgres1  2019-12-10T08:17:20.000Z  ap-southeast-2a  None
i-806d8f1592e2a2efd  ami-123456789012  t3.nano  running  postgres2  2019-12-10T08:17:22.000Z  ap-southeast-2a  None
</pre></div>


<h3 id="instance-asg">instance-asg<a class="headerlink" href="#instance-asg" title="Permanent link">&para;</a></h3>
<p>List autoscaling group membership of EC2 Instance(s)</p>
<div class="codehilite"><pre><span></span>USAGE: instance-asg instance-id [instance-id]
</pre></div>


<h3 id="instance-az">instance-az<a class="headerlink" href="#instance-az" title="Permanent link">&para;</a></h3>
<p>List availability zone of EC2 Instance(s)</p>
<div class="codehilite"><pre><span></span>USAGE: instance-az instance-id [instance-id]

$ instances postgres | instance-az
i-89cefa9403373d7a5  ap-southeast-2a
i-806d8f1592e2a2efd  ap-southeast-2a
</pre></div>


<h3 id="instance-console">instance-console<a class="headerlink" href="#instance-console" title="Permanent link">&para;</a></h3>
<p>List console output of EC2 Instance(s)</p>
<div class="codehilite"><pre><span></span>USAGE: instance-console instance-id [instance-id]

$ instances postgres | instance-console
Console output for EC2 Instance i-89cefa9403373d7a5
Linux version 2.6.16-xenU (builder@patchbat.amazonsa) (gcc version 4.0.1 20050727 (Red Hat 4.0.1-5)) #1 SMP Thu Oct 26 08:41:26 SAST 2006
BIOS-provided physical RAM map:
Xen: 0000000000000000 - 000000006a400000 (usable)
...snip...

Console output for EC2 Instance i-806d8f1592e2a2efd
Linux version 2.6.16-xenU (builder@patchbat.amazonsa) (gcc version 4.0.1 20050727 (Red Hat 4.0.1-5)) #1 SMP Thu Oct 26 08:41:26 SAST 2006
BIOS-provided physical RAM map:
Xen: 0000000000000000 - 000000006a400000 (usable)
...snip...
</pre></div>


<h3 id="instance-dns">instance-dns<a class="headerlink" href="#instance-dns" title="Permanent link">&para;</a></h3>
<p>List DNS name of EC2 Instance(s)</p>
<div class="codehilite"><pre><span></span>USAGE: instance-dns instance-id [instance-id]

$ instances postgres | instance-dns
i-89cefa9403373d7a5  ip-10-155-35-61.ap-southeast-2.compute.internal   ec2-54-214-206-114.ap-southeast-2.compute.amazonaws.com
i-806d8f1592e2a2efd  ip-10-178-243-63.ap-southeast-2.compute.internal  ec2-54-214-244-90.ap-southeast-2.compute.amazonaws.com
</pre></div>


<h3 id="instance-health-set-unhealthy">instance-health-set-unhealthy<a class="headerlink" href="#instance-health-set-unhealthy" title="Permanent link">&para;</a></h3>
<p>Mark EC2 Instance(s) as unhealthy (to trigger replacement by ASG)</p>
<div class="codehilite"><pre><span></span>USAGE: instance-health-set-unhealthy instance-id [instance-id]
</pre></div>


<h3 id="instance-iam-profile">instance-iam-profile<a class="headerlink" href="#instance-iam-profile" title="Permanent link">&para;</a></h3>
<p>List iam-profile of EC2 Instance(s)</p>
<div class="codehilite"><pre><span></span>USAGE: instance-iam-profile instance-id [instance-id]
</pre></div>


<h3 id="instance-ip">instance-ip<a class="headerlink" href="#instance-ip" title="Permanent link">&para;</a></h3>
<p>List ip address of EC2 Instance(s)</p>
<div class="codehilite"><pre><span></span>USAGE: instance-ip instance-id [instance-id]

$ instances postgres | instance-ip
i-89cefa9403373d7a5  10.155.35.61   54.214.206.114
i-806d8f1592e2a2efd  10.178.243.63  54.214.244.90
</pre></div>


<h3 id="instance-ssh">instance-ssh<a class="headerlink" href="#instance-ssh" title="Permanent link">&para;</a></h3>
<p>Establish SSH connection to EC2 Instance(s)</p>
<div class="codehilite"><pre><span></span>USAGE: instance-ssh [login] [instance-id] [instance-id]
</pre></div>


<h3 id="instance-ssh-details">instance-ssh-details<a class="headerlink" href="#instance-ssh-details" title="Permanent link">&para;</a></h3>
<p>List details needed to SSH into EC2 Instance(s)</p>
<div class="codehilite"><pre><span></span>USAGE: instance-ssh-details [login] [instance-id] [instance-id]
</pre></div>


<h3 id="instance-stack">instance-stack<a class="headerlink" href="#instance-stack" title="Permanent link">&para;</a></h3>
<p>List CloudFormation stack EC2 Instance(s) belong to (if any)</p>
<div class="codehilite"><pre><span></span>USAGE: instance-stack instance-id [instance-id]

$ instances postgres | instance-stack
postgres1  i-89cefa9403373d7a5
postgres2  i-806d8f1592e2a2efd
</pre></div>


<h3 id="instance-start">instance-start<a class="headerlink" href="#instance-start" title="Permanent link">&para;</a></h3>
<p>Start stopped EC2 Instance(s)</p>
<div class="codehilite"><pre><span></span>USAGE: instance-start instance-id [instance-id]

$ instances postgres | instance-start
i-a8b8dd6783e1a40cc  PreviousState=stopped  CurrentState=pending
i-5d74753e210bfe04d  PreviousState=stopped  CurrentState=pending
</pre></div>


<h3 id="instance-state">instance-state<a class="headerlink" href="#instance-state" title="Permanent link">&para;</a></h3>
<p>List state of EC2 Instance(s)</p>
<div class="codehilite"><pre><span></span>USAGE: instance-state instance-id [instance-id]

$ instances postgres | instance-state
i-89cefa9403373d7a5  running
i-806d8f1592e2a2efd  running
</pre></div>


<h3 id="instance-stop">instance-stop<a class="headerlink" href="#instance-stop" title="Permanent link">&para;</a></h3>
<p>Stop EC2 Instance(s)</p>
<div class="codehilite"><pre><span></span>USAGE: instance-stop instance-id [instance-id]

$ instances postgres | instance-stop

i-a8b8dd6783e1a40cc  PreviousState=running  CurrentState=stopping
i-5d74753e210bfe04d  PreviousState=running  CurrentState=stopping
</pre></div>


<h3 id="instance-tags">instance-tags<a class="headerlink" href="#instance-tags" title="Permanent link">&para;</a></h3>
<p>List tags applied EC2 Instance(s)</p>
<div class="codehilite"><pre><span></span>USAGE: instance-tags instance-id [instance-id]
</pre></div>


<h3 id="instance-terminate">instance-terminate<a class="headerlink" href="#instance-terminate" title="Permanent link">&para;</a></h3>
<p>Terminate EC2 Instance(s)</p>
<div class="codehilite"><pre><span></span>USAGE: instance-terminate instance-id [instance-id]

$ instances | head -3 | instance-terminate
You are about to terminate the following instances:
i-01c7edb986c18c16a  ami-0119aa4d67e59007c  t3.nano  terminated  asg2  2019-12-13T03:37:51.000Z  ap-southeast-2c  None
i-012dded46894dfa04  ami-0119aa4d67e59007c  t3.nano  running     ec2   2019-12-13T10:12:55.000Z  ap-southeast-2b  vpc-deb8edb9
Are you sure you want to continue? y
i-06ee900565652ecc5  PreviousState=terminated  CurrentState=terminated
i-01c7edb986c18c16a  PreviousState=terminated  CurrentState=terminated
i-012dded46894dfa04  PreviousState=running     CurrentState=shutting-down
</pre></div>


<h3 id="instance-termination-protection">instance-termination-protection<a class="headerlink" href="#instance-termination-protection" title="Permanent link">&para;</a></h3>
<p>List current state of Termination Protection for EC2 Instance(s)</p>
<div class="codehilite"><pre><span></span>USAGE: instance-termination-protection instance-id [instance-id]

$ instances | instance-termination-protection
i-4e15ece1de1a3f869 DisableApiTermination=true
i-89cefa9403373d7a5 DisableApiTermination=false
i-806d8f1592e2a2efd DisableApiTermination=false
i-61e86ac6be1e2c193 DisableApiTermination=false
</pre></div>


<h3 id="instance-termination-protection-disable">instance-termination-protection-disable<a class="headerlink" href="#instance-termination-protection-disable" title="Permanent link">&para;</a></h3>
<p>Disable EC2 Instance termination protection</p>
<div class="codehilite"><pre><span></span>USAGE: instance-termination-protection-disable instance-id [instance-id]
</pre></div>


<h3 id="instance-termination-protection-enable">instance-termination-protection-enable<a class="headerlink" href="#instance-termination-protection-enable" title="Permanent link">&para;</a></h3>
<p>Enable EC2 Instance termination protection</p>
<div class="codehilite"><pre><span></span>USAGE: instance-termination-protection-enable instance-id [instance-id]
</pre></div>


<h3 id="instance-type">instance-type<a class="headerlink" href="#instance-type" title="Permanent link">&para;</a></h3>
<p>List type of instance(s)</p>
<div class="codehilite"><pre><span></span>USAGE: instance-type instance-id [instance-id]

$ instances | instance-type
i-4e15ece1de1a3f869  t3.nano
i-89cefa9403373d7a5  t3.nano
i-806d8f1592e2a2efd  t3.nano
i-61e86ac6be1e2c193  t3.nano
</pre></div>


<h3 id="instance-userdata">instance-userdata<a class="headerlink" href="#instance-userdata" title="Permanent link">&para;</a></h3>
<p>List userdata for instance(s)</p>
<div class="codehilite"><pre><span></span>USAGE: instance-userdata instance-id [instance-id]
</pre></div>


<h3 id="instance-volumes">instance-volumes<a class="headerlink" href="#instance-volumes" title="Permanent link">&para;</a></h3>
<p>List volumes of instance(s)</p>
<div class="codehilite"><pre><span></span>USAGE: instance-volumes instance-id [instance-id]

$ instances postgres | instance-volumes
i-89cefa9403373d7a5  vol-cf5ddae9
i-806d8f1592e2a2efd  vol-38fd45c3
</pre></div>


<h3 id="instance-vpc">instance-vpc<a class="headerlink" href="#instance-vpc" title="Permanent link">&para;</a></h3>
<p>List VPC of instance(s)</p>
<div class="codehilite"><pre><span></span>USAGE: instance-vpcs instance-id [instance-id]
</pre></div>


<h2 id="asg-commands">asg-commands<a class="headerlink" href="#asg-commands" title="Permanent link">&para;</a></h2>
<h3 id="asgs">asgs<a class="headerlink" href="#asgs" title="Permanent link">&para;</a></h3>
<p>List EC2 Autoscaling Groups</p>
<h3 id="asg-capacity">asg-capacity<a class="headerlink" href="#asg-capacity" title="Permanent link">&para;</a></h3>
<p>List min, desired and maximum capacities of EC2 Autoscaling Group(s)</p>
<h3 id="asg-desired-size-set">asg-desired-size-set<a class="headerlink" href="#asg-desired-size-set" title="Permanent link">&para;</a></h3>
<p>Set desired capacity of autoscaling group(s)</p>
<h3 id="asg-instances">asg-instances<a class="headerlink" href="#asg-instances" title="Permanent link">&para;</a></h3>
<p>List instances of autoscaling group(s)</p>
<h3 id="asg-launch-configuration">asg-launch-configuration<a class="headerlink" href="#asg-launch-configuration" title="Permanent link">&para;</a></h3>
<p>List Launch Configurations of Autoscaling Group(s)</p>
<h3 id="launch-configurations">launch-configurations<a class="headerlink" href="#launch-configurations" title="Permanent link">&para;</a></h3>
<p>List Launch Configurations</p>
<h3 id="launch-configuration-asgs">launch-configuration-asgs<a class="headerlink" href="#launch-configuration-asgs" title="Permanent link">&para;</a></h3>
<p>List EC2 Autoscaling Groups of Launch COnfiguration(s)</p>
<h3 id="asg-max-size-set">asg-max-size-set<a class="headerlink" href="#asg-max-size-set" title="Permanent link">&para;</a></h3>
<p>Set maximum size of autoscaling group(s)</p>
<h3 id="asg-min-size-set">asg-min-size-set<a class="headerlink" href="#asg-min-size-set" title="Permanent link">&para;</a></h3>
<p>Set minimum size of autoscaling group(s)</p>
<h3 id="asg-processes_suspended">asg-processes_suspended<a class="headerlink" href="#asg-processes_suspended" title="Permanent link">&para;</a></h3>
<p>List suspended processes of an autoscaling group</p>
<h3 id="asg-resume">asg-resume<a class="headerlink" href="#asg-resume" title="Permanent link">&para;</a></h3>
<p>Resume all processes of an autoscaling group</p>
<h3 id="asg-suspend">asg-suspend<a class="headerlink" href="#asg-suspend" title="Permanent link">&para;</a></h3>
<p>Suspend all processes of an autoscaling group</p>
<h3 id="asg-stack">asg-stack<a class="headerlink" href="#asg-stack" title="Permanent link">&para;</a></h3>
<p>List CloudFormation stack for asg(s)</p>
<h3 id="asg-scaling-activities">asg-scaling-activities<a class="headerlink" href="#asg-scaling-activities" title="Permanent link">&para;</a></h3>
<p>List scaling activities for Autoscaling Group(s)</p>
<h2 id="cert-commands">cert-commands<a class="headerlink" href="#cert-commands" title="Permanent link">&para;</a></h2>
<h3 id="certs">certs<a class="headerlink" href="#certs" title="Permanent link">&para;</a></h3>
<p>List ACM Certificates</p>
<h3 id="certs-arn">certs-arn<a class="headerlink" href="#certs-arn" title="Permanent link">&para;</a></h3>
<p>Same as <code>certs</code> but with the ARN in first column</p>
<h3 id="cert-users">cert-users<a class="headerlink" href="#cert-users" title="Permanent link">&para;</a></h3>
<p>List resources using ACM Cert(s)</p>
<div class="codehilite"><pre><span></span>USAGE: cert-users cert-arn [cert-arn]
</pre></div>


<h3 id="cert-delete">cert-delete<a class="headerlink" href="#cert-delete" title="Permanent link">&para;</a></h3>
<p>Delete ACM Cert(s)</p>
<div class="codehilite"><pre><span></span>USAGE: cert-delete cert-arn [cert-arn]
</pre></div>


<h2 id="cloudtrail-commands">cloudtrail-commands<a class="headerlink" href="#cloudtrail-commands" title="Permanent link">&para;</a></h2>
<h3 id="cloudtrails">cloudtrails<a class="headerlink" href="#cloudtrails" title="Permanent link">&para;</a></h3>
<p>List Cloudtrails</p>
<div class="codehilite"><pre><span></span>$ cloudtrails
failmode    failmode-cloudtrail ap-southeast-2  IsMultiRegionTrail=true IncludeGlobalServiceEvents=true
</pre></div>


<h3 id="cloudtrail-status">cloudtrail-status<a class="headerlink" href="#cloudtrail-status" title="Permanent link">&para;</a></h3>
<p>List logging status of Cloudtrails</p>
<div class="codehilite"><pre><span></span>USAGE: cloudtrail-status cloudtrail [cloudtrail]
</pre></div>


<h2 id="ecr-commands">ecr-commands<a class="headerlink" href="#ecr-commands" title="Permanent link">&para;</a></h2>
<h3 id="ecr-repositories">ecr-repositories<a class="headerlink" href="#ecr-repositories" title="Permanent link">&para;</a></h3>
<p>List ECR Repositories</p>
<h3 id="ecr-repository-images">ecr-repository-images<a class="headerlink" href="#ecr-repository-images" title="Permanent link">&para;</a></h3>
<p>List images for ECR Repositories</p>
<h2 id="elb-commands">elb-commands<a class="headerlink" href="#elb-commands" title="Permanent link">&para;</a></h2>
<h3 id="elbs">elbs<a class="headerlink" href="#elbs" title="Permanent link">&para;</a></h3>
<p>List ELBs
Accepts LoadBalancer names or ARNS on STDIN and converts to LoadBalancer names</p>
<div class="codehilite"><pre><span></span>$ elbs
elb-MyLoadBalancer-1FNISWJN0W6N9  2019-12-13T10:24:55.220Z  subnet-eff2cf88
another-e-MyLoadBa-171CPCZF2E84T  2019-12-13T10:25:24.300Z  subnet-eff2cf88
</pre></div>


<h3 id="elb-dnsname">elb-dnsname<a class="headerlink" href="#elb-dnsname" title="Permanent link">&para;</a></h3>
<p>List DNS Names of ELB(s)</p>
<div class="codehilite"><pre><span></span> USAGE: elb-dnsname load-balancer [load-balancer]

 $ elbs | elb-dnsname
 elb-MyLoadBalancer-1FNISWJN0W6N9  elb-MyLoadBalancer-1FNISWJN0W6N9-563832045.ap-southeast-2.elb.amazonaws.com
 another-e-MyLoadBa-171CPCZF2E84T  another-e-MyLoadBa-171CPCZF2E84T-1832721930.ap-southeast-2.elb.amazonaws.com
</pre></div>


<h3 id="elb-instances">elb-instances<a class="headerlink" href="#elb-instances" title="Permanent link">&para;</a></h3>
<p>List instances of ELB(s)</p>
<div class="codehilite"><pre><span></span> USAGE: elb-instances load-balancer [load-balancer]
</pre></div>


<h3 id="elb-stack">elb-stack<a class="headerlink" href="#elb-stack" title="Permanent link">&para;</a></h3>
<p>List CloudFormation stack names of ELB(s)</p>
<div class="codehilite"><pre><span></span>USAGE: elb-stack load-balancer [load-balancer]

$ elbs | elb-stack
elb          elb-MyLoadBalancer-1FNISWJN0W6N9
another-elb  another-e-MyLoadBa-171CPCZF2E84T
</pre></div>


<h2 id="iam-commands">iam-commands<a class="headerlink" href="#iam-commands" title="Permanent link">&para;</a></h2>
<h3 id="iam-roles">iam-roles<a class="headerlink" href="#iam-roles" title="Permanent link">&para;</a></h3>
<p>List IAM Roles</p>
<div class="codehilite"><pre><span></span>$ iam-roles
config-role-ap-southeast-2               AROAI3QHAU3J2CDRNLQHD  2017-02-02T03:03:02Z
AWSBatchServiceRole                      AROAJJWRGUPTRXTV52TED  2017-03-09T05:31:39Z
ecsInstanceRole                          AROAJFQ3WMZXESGIKW5YD  2017-03-09T05:31:39Z
</pre></div>


<h3 id="iam-role-principal">iam-role-principal<a class="headerlink" href="#iam-role-principal" title="Permanent link">&para;</a></h3>
<p>List role principal for IAM Role(s)</p>
<div class="codehilite"><pre><span></span>USAGE: iam-role-principal role-name [role-name]
</pre></div>


<h2 id="image-commands">image-commands<a class="headerlink" href="#image-commands" title="Permanent link">&para;</a></h2>
<h3 id="images">images<a class="headerlink" href="#images" title="Permanent link">&para;</a></h3>
<p>List EC2 AMI's</p>
<p>Usage: images [owner] [image-id] [image-id]...</p>
<p>owner defaults to <code>self</code> or can one or more of:</p>
<ul>
<li>an AWS_ACCOUNT_ID  (e.g. 1234567890)</li>
<li>an AWS_OWNER_ALIAS (amazon, amazon-marketplace, microsoft)</li>
</ul>
<p>image_id can be one or more AMIs</p>
<p>Trialing a different approach for grabbing resource ids from input.<br />
As normal, you can pipe resource ids in as first token on each line.<br />
We treat all args that don't start with ami- as owner identifiers.  </p>
<p>Trialing a new pattern for output - putting the Name at the end.<br />
This is more like the output of <code>ls -la</code></p>
<ul>
<li>Pro: Preceding fields tend to be of the same length</li>
<li>Pro: Easier for eyes to scan final column for names(?)</li>
<li>Con: Using this pattern for instances() would put name past 80 char point</li>
<li>Con: Migrating instances() to this output is A Big Change (not made lightly)</li>
</ul>
<h3 id="image-deregister">image-deregister<a class="headerlink" href="#image-deregister" title="Permanent link">&para;</a></h3>
<p>Deregister AMI(s)</p>
<div class="codehilite"><pre><span></span>USAGE: image-deregister image_id [image_id]
</pre></div>


<h2 id="keypair-commands">keypair-commands<a class="headerlink" href="#keypair-commands" title="Permanent link">&para;</a></h2>
<h3 id="keypairs">keypairs<a class="headerlink" href="#keypairs" title="Permanent link">&para;</a></h3>
<p>List EC2 SSH Keypairs in current Region</p>
<div class="codehilite"><pre><span></span>$ keypairs
alice  8f:85:9a:1e:6c:76:29:34:37:45:de:7f:8d:f9:70:eb
bob    56:73:29:c2:ad:7b:6f:b6:f2:f3:b4:de:e4:2b:12:d4
</pre></div>


<h3 id="keypair-create">keypair-create<a class="headerlink" href="#keypair-create" title="Permanent link">&para;</a></h3>
<p>Create SSH Keypair on local machine and import public key into new EC2 Keypair.</p>
<p>Provides benefits over AWS creating the keypair:</p>
<p>Amazon never has access to private key.<br />
Private key is protected with passphrase before being written to disk.<br />
Keys is written to ~/.ssh with correct file permissions.<br />
You control the SSH Key type (algorithm, length, etc).  </p>
<div class="codehilite"><pre><span></span>USAGE: keypair-delete key_name [key_name]

$ keypair-create yet-another-keypair
Creating /home/m/.ssh/yet-another-keypair
Generating public/private rsa key pair.
Enter passphrase (empty for no passphrase):
Enter same passphrase again:
Your identification has been saved in /home/m/.ssh/yet-another-keypair.
Your public key has been saved in /home/m/.ssh/yet-another-keypair.pub.
The key fingerprint is:
SHA256:zIpbxLo7rpQvKyezOLATk96B1kSL0QP41q6x8tUrySk m@localhost.localdomain
The key&#39;s randomart image is:
+---[RSA 4096]----+
|..o              |
|.. +             |
| .+.o            |
| .oo.. o         |
| o+.  o S        |
|=o.+.= .         |
|+++==o+          |
|XoE+*+ .         |
|o@+**+.          |
+----[SHA256]-----+
{
    &quot;KeyFingerprint&quot;: &quot;21:82:f9:5b:79:d6:dc:0f:7b:79:43:7c:c5:34:6c:2d&quot;,
    &quot;KeyName&quot;: &quot;yet-another-keypair&quot;
}
</pre></div>


<div class="admonition note">
<p class="admonition-title">Note</p>
<p>KeyPair Name defaults to "$(aws-account-alias)-$(region)" if none provided</p>
</div>
<h3 id="keypair-delete">keypair-delete<a class="headerlink" href="#keypair-delete" title="Permanent link">&para;</a></h3>
<p>Delete EC2 SSH Keypairs by providing their names as arguments or via STDIN</p>
<div class="codehilite"><pre><span></span>USAGE: keypair-delete key_name [key_name]

$ keypair-delete alice bob
You are about to delete the following EC2 SSH KeyPairs:
alice
bob
Are you sure you want to continue? y

$ keypairs | keypair-delete
You are about to delete the following EC2 SSH KeyPairs:
yet-another-keypair
Are you sure you want to continue? y
</pre></div>


<h2 id="kms-commands">kms-commands<a class="headerlink" href="#kms-commands" title="Permanent link">&para;</a></h2>
<h3 id="kms-encrypt">kms-encrypt<a class="headerlink" href="#kms-encrypt" title="Permanent link">&para;</a></h3>
<p>Encrypt and base64 encode STDIN or file</p>
<div class="codehilite"><pre><span></span>USAGE: kms-encrypt key_id/alias_id [plaintext_file]

$ echo foobar | kms-encrypt alias/default
AQICAHgcyN4vd3V/OB7NKI6IMbpENEu1+UfyiU...
</pre></div>


<h3 id="kms-decrypt">kms-decrypt<a class="headerlink" href="#kms-decrypt" title="Permanent link">&para;</a></h3>
<p>base64 decode and decrypt KMS Encrypted file or STDIN</p>
<div class="codehilite"><pre><span></span>USAGE: kms-decrypt [ciphertext_file]

$ kms-decrypt ciphertext.txt
foobar

$ echo foobar | kms-encrypt alias/default | kms-decrypt
foobar
</pre></div>


<h3 id="kms-aliases">kms-aliases<a class="headerlink" href="#kms-aliases" title="Permanent link">&para;</a></h3>
<p>List KMS Aliases</p>
<div class="codehilite"><pre><span></span>$ kms-aliases default
alias/default  d714a175-db12-4574-8f27-aa071a1dfd8a  arn:aws:kms:ap-southeast-2:089834043791:alias/default
</pre></div>


<h3 id="kms-alias-create">kms-alias-create<a class="headerlink" href="#kms-alias-create" title="Permanent link">&para;</a></h3>
<p>Create alias for KMS Key</p>
<div class="codehilite"><pre><span></span>USAGE: kms-alias-create alias_name key_id

$ kms-keys | tail -1
d714a175-db12-4574-8f27-aa071a1dfd8a

$ kms-keys | tail -1 | kms-alias-create alias/foobar

$ kms-aliases foobar
alias/foobar  d714a175-db12-4574-8f27-aa071a1dfd8a  arn:aws:kms:ap-southeast-2:089834043791:alias/foobar
</pre></div>


<h3 id="kms-alias-delete">kms-alias-delete<a class="headerlink" href="#kms-alias-delete" title="Permanent link">&para;</a></h3>
<p>Delete alias for KMS Key</p>
<div class="codehilite"><pre><span></span>USAGE: kms-alias-delete alias_name [alias_name]

$ kms-aliases foobar | kms-alias-delete
You are about to delete the following kms aliases:
alias/foobar
Are you sure you want to continue? y
</pre></div>


<h3 id="kms-keys">kms-keys<a class="headerlink" href="#kms-keys" title="Permanent link">&para;</a></h3>
<p>List KMS Keys</p>
<div class="codehilite"><pre><span></span>$ kms-keys
5044958c-151d-4995-bed4-dd05c1385b48
8ada3e65-e377-4435-a709-fbe75dfa1dd0
d714a175-db12-4574-8f27-aa071a1dfd8a
</pre></div>


<h3 id="kms-key-create">kms-key-create<a class="headerlink" href="#kms-key-create" title="Permanent link">&para;</a></h3>
<p>Create a KMS Key</p>
<div class="codehilite"><pre><span></span>$ kms-key-create
9e94333b-8e85-497a-9791-e7c5edf9c35e
</pre></div>


<h3 id="kms-key-details">kms-key-details<a class="headerlink" href="#kms-key-details" title="Permanent link">&para;</a></h3>
<p>List details for KMS Key(s)</p>
<h3 id="kms-key-disable">kms-key-disable<a class="headerlink" href="#kms-key-disable" title="Permanent link">&para;</a></h3>
<p>Disable KMS Key(s)</p>
<div class="codehilite"><pre><span></span>USAGE: kms-key-disable key_id [key_id]

$ kms-key-disable  9e94333b-8e85-497a-9791-e7c5edf9c35e
</pre></div>


<h3 id="kms-key-enable">kms-key-enable<a class="headerlink" href="#kms-key-enable" title="Permanent link">&para;</a></h3>
<p>Enable KMS Key(s)</p>
<div class="codehilite"><pre><span></span>USAGE: kms-key-enable key_id [key_id]

$ kms-key-enable  9e94333b-8e85-497a-9791-e7c5edf9c35e
</pre></div>


<h2 id="lambda-commands">lambda-commands<a class="headerlink" href="#lambda-commands" title="Permanent link">&para;</a></h2>
<h3 id="lambda-functions">lambda-functions<a class="headerlink" href="#lambda-functions" title="Permanent link">&para;</a></h3>
<p>List lambda functions</p>
<div class="codehilite"><pre><span></span>$ lambda-functions
stars    2019-12-18T10:00:00.000+0000  python2.7  256
stripes  2019-12-19T10:21:42.444+0000  python3.7  128
</pre></div>


<h3 id="lambda-function-memory">lambda-function-memory<a class="headerlink" href="#lambda-function-memory" title="Permanent link">&para;</a></h3>
<p>List memorySize for lambda function(s)</p>
<div class="codehilite"><pre><span></span>USAGE: lambda-function-memory function [function]
</pre></div>


<h3 id="lambda-function-memory-set">lambda-function-memory-set<a class="headerlink" href="#lambda-function-memory-set" title="Permanent link">&para;</a></h3>
<p>Update memorySize for lambda function(s)</p>
<div class="codehilite"><pre><span></span>USAGE: lambda-function-memory-set memory function [function]
</pre></div>


<h3 id="lambda-function-memory-step">lambda-function-memory-step<a class="headerlink" href="#lambda-function-memory-step" title="Permanent link">&para;</a></h3>
<p>Repeatedly update memorySize for lambda function(s)</p>
<p>Useful for measuring impact of memory on cost/performance.
The function increases memorySize by 64KB every two minutes
until it reaches the value requested. There is a two minute
delay between increases to provide time to collect data from
function execution.</p>
<div class="codehilite"><pre><span></span>USAGE: lambda-function-memory-step memory function [function]
</pre></div>


<h2 id="log-commands">log-commands<a class="headerlink" href="#log-commands" title="Permanent link">&para;</a></h2>
<h3 id="log-groups">log-groups<a class="headerlink" href="#log-groups" title="Permanent link">&para;</a></h3>
<p>List CloudWatch Log Groups</p>
<div class="codehilite"><pre><span></span>$ log-groups
/aws/lambda/stars2  1576495961429  0   11736
/aws/lambda/stars   1576566745961  0  107460
/aws/lambda/walk    1576567300172  0   11794
</pre></div>


<h2 id="rds-commands">rds-commands<a class="headerlink" href="#rds-commands" title="Permanent link">&para;</a></h2>
<h3 id="rds-db-instances">rds-db-instances<a class="headerlink" href="#rds-db-instances" title="Permanent link">&para;</a></h3>
<p>List RDS Database Instances</p>
<h2 id="route53-commands">route53-commands<a class="headerlink" href="#route53-commands" title="Permanent link">&para;</a></h2>
<h3 id="hosted-zones">hosted-zones<a class="headerlink" href="#hosted-zones" title="Permanent link">&para;</a></h3>
<p>List Route53 Hosted Zones</p>
<div class="codehilite"><pre><span></span>$ hosted-zones
/hostedzone/Z3333333333333  5   NotPrivateZone  bash-my-aws.org.
/hostedzone/Z5555555555555  2   NotPrivateZone  bash-my-universe.com.
/hostedzone/Z4444444444444  3   NotPrivateZone  bashmyaws.org.
/hostedzone/Z1111111111111  3   NotPrivateZone  bash-my-aws.com.
/hostedzone/Z2222222222222  3   NotPrivateZone  bashmyaws.com.
</pre></div>


<h3 id="hosted-zone-ns-records">hosted-zone-ns-records<a class="headerlink" href="#hosted-zone-ns-records" title="Permanent link">&para;</a></h3>
<p>Generate NS records for delegating domain to AWS</p>
<div class="codehilite"><pre><span></span>$ hosted-zones bash-my-aws.org
/hostedzone/ZJ6ZCG2UD6OKX  5  NotPrivateZone  bash-my-aws.org.

$ hosted-zones bash-my-aws.org | hosted-zone-ns-records
bash-my-aws.org. 300 IN NS  ns-786.awsdns-34.net.
bash-my-aws.org. 300 IN NS  ns-1549.awsdns-01.co.uk.
bash-my-aws.org. 300 IN NS  ns-362.awsdns-45.com.
bash-my-aws.org. 300 IN NS  ns-1464.awsdns-55.org.
</pre></div>


<h2 id="s3-commands">s3-commands<a class="headerlink" href="#s3-commands" title="Permanent link">&para;</a></h2>
<h3 id="buckets">buckets<a class="headerlink" href="#buckets" title="Permanent link">&para;</a></h3>
<p>List S3 Buckets</p>
<div class="codehilite"><pre><span></span>$ buckets
web-assets  2019-12-20  08:24:38.182045
backups     2019-12-20  08:24:44.351215
archive     2019-12-20  08:24:57.567652
</pre></div>


<h3 id="bucket-acls">bucket-acls<a class="headerlink" href="#bucket-acls" title="Permanent link">&para;</a></h3>
<p>List S3 Bucket Access Control Lists.</p>
<div class="codehilite"><pre><span></span>$ bucket-acls another-example-bucket
another-example-bucket
</pre></div>


<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The only recommended use case for the bucket ACL is to grant write
permission to the Amazon S3 Log Delivery group to write access log
objects to your bucket. <a href="https://docs.aws.amazon.com/AmazonS3/latest/dev/access-policy-alternatives-guidelines.html">AWS docs</a></p>
</div>
<h3 id="bucket-remove">bucket-remove<a class="headerlink" href="#bucket-remove" title="Permanent link">&para;</a></h3>
<p>Remove an empty S3 Bucket.</p>
<p><em>In this example the bucket is not empty.</em></p>
<div class="codehilite"><pre><span></span>$ bucket-remove another-example-bucket
You are about to remove the following buckets:
another-example-bucket  2019-12-07  06:51:12.022496
Are you sure you want to continue? y
remove_bucket failed: s3://another-example-bucket An error occurred (BucketNotEmpty) when calling the DeleteBucket operation: The bucket you tried to delete is not empty
</pre></div>


<h3 id="bucket-remove-force">bucket-remove-force<a class="headerlink" href="#bucket-remove-force" title="Permanent link">&para;</a></h3>
<p>Remove an S3 Bucket, and delete all objects if it's not empty.</p>
<div class="codehilite"><pre><span></span>$ bucket-remove-force another-example-bucket
You are about to delete all objects from and remove the following buckets:
another-example-bucket  2019-12-07  06:51:12.022496
Are you sure you want to continue? y
delete: s3://another-example-bucket/aliases
remove_bucket: another-example-bucket
</pre></div>


<h2 id="sts-commands">sts-commands<a class="headerlink" href="#sts-commands" title="Permanent link">&para;</a></h2>
<h3 id="sts-assume-role">sts-assume-role<a class="headerlink" href="#sts-assume-role" title="Permanent link">&para;</a></h3>
<p>Assume an IAM Role</p>
<div class="codehilite"><pre><span></span>USAGE: sts-assume-role role_arn
</pre></div>


<h2 id="vpc-commands">vpc-commands<a class="headerlink" href="#vpc-commands" title="Permanent link">&para;</a></h2>
<h3 id="pcxs">pcxs<a class="headerlink" href="#pcxs" title="Permanent link">&para;</a></h3>
<p>List VPC Peering connections</p>
<h3 id="subnets">subnets<a class="headerlink" href="#subnets" title="Permanent link">&para;</a></h3>
<p>List subnets for all VPCs</p>
<div class="codehilite"><pre><span></span>$ subnets
subnet-34fd9cfa  vpc-018d9739  ap-southeast-2c  172.31.32.0/20  NO_NAME
subnet-8bb774fe  vpc-018d9739  ap-southeast-2a  172.31.0.0/20   NO_NAME
subnet-9eea2c07  vpc-018d9739  ap-southeast-2b  172.31.16.0/20  NO_NAME
</pre></div>


<h3 id="vpcs">vpcs<a class="headerlink" href="#vpcs" title="Permanent link">&para;</a></h3>
<p>List VPCs</p>
<div class="codehilite"><pre><span></span>$ vpcs
vpc-018d9739  default-vpc  NO_NAME  172.31.0.0/16  NO_STACK  NO_VERSION
</pre></div>


<h3 id="vpc-azs">vpc-azs<a class="headerlink" href="#vpc-azs" title="Permanent link">&para;</a></h3>
<p>List availability zones of VPC(s)</p>
<div class="codehilite"><pre><span></span>USAGE: vpc-azs vpc-id [vpc-id]

$ vpcs | vpc-azs
vpc-018d9739 ap-southeast-2a ap-southeast-2b ap-southeast-2c
</pre></div>


<h3 id="vpc-az-count">vpc-az-count<a class="headerlink" href="#vpc-az-count" title="Permanent link">&para;</a></h3>
<p>List number of Availability Zones of VPC(s)</p>
<div class="codehilite"><pre><span></span>USAGE: vpc-az-count vpc-id [vpc-id]

$ vpcs | vpc-az-count
vpc-018d9739 3
</pre></div>


<h3 id="vpc-lambda-functions">vpc-lambda-functions<a class="headerlink" href="#vpc-lambda-functions" title="Permanent link">&para;</a></h3>
<p>List lambda functions of VPC(s)</p>
<div class="codehilite"><pre><span></span>USAGE: vpc-lambda-functions vpc-id [vpc-id]
</pre></div>


<h3 id="vpc-dhcp-options-ntp">vpc-dhcp-options-ntp<a class="headerlink" href="#vpc-dhcp-options-ntp" title="Permanent link">&para;</a></h3>
<p>List NTP servers of VPC(s)</p>
<div class="codehilite"><pre><span></span>USAGE: vpc-dhcp-options-ntp vpc-id [vpc-id]
</pre></div>


<h3 id="vpc-endpoints">vpc-endpoints<a class="headerlink" href="#vpc-endpoints" title="Permanent link">&para;</a></h3>
<p>List VPC Endpoints of VPC(s)</p>
<div class="codehilite"><pre><span></span>USAGE: vpc-endpoints vpc-id [vpc-id]
</pre></div>


<h3 id="vpc-endpoint-services">vpc-endpoint-services<a class="headerlink" href="#vpc-endpoint-services" title="Permanent link">&para;</a></h3>
<p>List available VPC endpoint services</p>
<div class="codehilite"><pre><span></span>USAGE: vpc-endpoint-services vpc-id [vpc-id]
</pre></div>


<h3 id="vpc-igw">vpc-igw<a class="headerlink" href="#vpc-igw" title="Permanent link">&para;</a></h3>
<p>List Internet Gateway of VPC(s)</p>
<div class="codehilite"><pre><span></span>USAGE: vpc-igw vpc-id [vpc-id]
</pre></div>


<h3 id="vpc-route-tables">vpc-route-tables<a class="headerlink" href="#vpc-route-tables" title="Permanent link">&para;</a></h3>
<p>List Route Tables of VPC(s)</p>
<div class="codehilite"><pre><span></span>USAGE: vpc-route-tables vpc-id [vpc-id]

$ vpcs | vpc-route-tables
rtb-8e841c39  vpc-018d9739  NO_NAME
</pre></div>


<h3 id="vpc-nat-gateways">vpc-nat-gateways<a class="headerlink" href="#vpc-nat-gateways" title="Permanent link">&para;</a></h3>
<p>List NAT Gateways of VPC(s)</p>
<div class="codehilite"><pre><span></span>USAGE: vpc-nat-gateways vpc-id [vpc-id]
</pre></div>


<h3 id="vpc-subnets">vpc-subnets<a class="headerlink" href="#vpc-subnets" title="Permanent link">&para;</a></h3>
<p>List subnets of VPC(s)</p>
<div class="codehilite"><pre><span></span>USAGE: vpc-subnets vpc-id [vpc-id]

$ vpcs | vpc-subnets
subnet-34fd9cfa  vpc-018d9739  ap-southeast-2c  172.31.32.0/20  NO_NAME
subnet-8bb774fe  vpc-018d9739  ap-southeast-2a  172.31.0.0/20   NO_NAME
subnet-9eea2c07  vpc-018d9739  ap-southeast-2b  172.31.16.0/20  NO_NAME
</pre></div>


<h3 id="vpc-network-acls">vpc-network-acls<a class="headerlink" href="#vpc-network-acls" title="Permanent link">&para;</a></h3>
<p>List Network ACLs of VPC(s)</p>
<div class="codehilite"><pre><span></span>USAGE: vpc-network-acls vpc-id [vpc-id]

$ vpcs | vpc-network-acls
acl-ff4914d1  vpc-018d9739
</pre></div>


<h3 id="vpc-rds">vpc-rds<a class="headerlink" href="#vpc-rds" title="Permanent link">&para;</a></h3>
<p>List RDS instances of VPC(s)</p>
<div class="codehilite"><pre><span></span>USAGE: vpc-rds vpc-id [vpc-id]
</pre></div>


<h3 id="vpc-default-delete">vpc-default-delete<a class="headerlink" href="#vpc-default-delete" title="Permanent link">&para;</a></h3>
<p>Print commands you would need to run to delete that pesky default VPC
Exclude default VPCs that contain:
- instances
- lambda functions</p>
<div class="codehilite"><pre><span></span>$ vpc-default-delete

# Deleting default VPC vpc-018d9739 in ap-southeast-2
aws --region ap-southeast-2 ec2 delete-subnet --subnet-id=subnet-8bb774fe
aws --region ap-southeast-2 ec2 delete-subnet --subnet-id=subnet-9eea2c07
aws --region ap-southeast-2 ec2 delete-subnet --subnet-id=subnet-34fd9cfa
aws --region ap-southeast-2 ec2 delete-vpc --vpc-id=vpc-018d9739
</pre></div>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
  <div class="md-footer-social">
    <link rel="stylesheet" href="../assets/fonts/font-awesome.css">
    
      <a href="https://github.com/bash-my-universe" class="md-footer-social__link fa fa-github"></a>
    
      <a href="https://twitter.com/bashmyaws" class="md-footer-social__link fa fa-twitter"></a>
    
  </div>

    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/application.a8b5e56f.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:".."}})</script>
      
    
  </body>
</html>